<!doctype html lang="en">
<html ‚ö°>
  <head>
    <meta charset="utf-8">
    <title>A Quick Look At WeChat&#39;s Mini Programs</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <meta property="twitter:account_id" content="1510101733">
    <meta name="amp-google-client-id-api" content="googleanalytics">
    <meta name="Description" content="The personal blog of Thomas Steiner">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="canonical" href="/blogccasion/2019/08/15/a-quick-look-at-wechats-mini-programs/">
    <link rel="alternate" href="/blogccasion/feed/feed.xml" type="application/atom+xml" title="Blogccasion">
    <link type="text/plain" rel="author" href="https://tomayac.com/humans.txt">
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>
      #header,
      #navigation {
        background-color: #eee;
        margin: 0 0 .5em
      }

      #content,
      #header {
        width: 100%;
        border: 1px dashed silver
      }

      #aside,
      #content,
      #footer,
      #header,
      #navigation {
        border: 1px dashed silver
      }

      #content a,
      #footer a {
        padding: .2em;
        text-decoration: none
      }

      #aside a,
      #content a,
      #content>h3 a,
      #footer a,
      #navigation a {
        text-decoration: none
      }

      #aside a:hover,
      #aside a:link,
      #aside a:visited,
      #content h2,
      #content h3,
      #content>h3 a,
      #footer a,
      body {
        color: #000
      }

      html {
        box-sizing: border-box
      }

      *,
      ::after,
      ::before {
        box-sizing: inherit
      }

      body {
        background-color: #fff;
        font-size: 12pt;
        font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif
      }

      #blog,
      #ccasion {
        font-size: 1.5em;
        position: absolute;
        font-weight: 700
      }

      #blog {
        top: 0;
        left: 1em;
        z-index: 1;
        color: #ffd700
      }

      #ccasion {
        top: .05em;
        left: 2.12em;
        z-index: 2;
        color: #ff8032
      }

      #login {
        position: absolute;
        top: .05em;
        right: .5em
      }

      #header {
        font-size: 1.2em;
        max-width: 1400px;
        padding: 0;
        overflow: hidden
      }

      #aside h2,
      #navigation h2 {
        font-size: .9em
      }

      #container {
        display: -webkit-flex;
        display: flex;
        margin: 0 .5em;
        max-width: calc(1400px - .5em)
      }

      @media (min-width:480px) {
        #container {
          -webkit-flex-direction: row;
          flex-direction: row
        }
      }

      @media (max-width:480px) {
        #container {
          -webkit-flex-direction: column;
          flex-direction: column
        }
      }

      #navigation-aside {
        display: -webkit-flex;
        display: flex
      }

      @media (min-width:480px) {
        #navigation-aside {
          -webkit-flex-direction: column;
          flex-direction: column
        }
      }

      #navigation {
        width: 120px
      }

      #navigation h2 {
        margin: 0;
        background-color: #ffd700
      }

      #navigation a {
        display: block;
        overflow-x: hidden;
        padding: 0 0 .2em;
        font-weight: 700;
        color: #000
      }

      .category0:hover {
        background-color: #c0c0ff
      }

      .category1:hover {
        background-color: #ff8032
      }

      .category2:hover {
        background-color: #80ff00
      }

      .category3:hover {
        background-color: #ff0080
      }

      .category4:hover {
        background-color: #ff0
      }

      .category5:hover {
        background-color: #80ff80
      }

      .category6:hover {
        background-color: #ff8080
      }

      .category7:hover {
        background-color: #c0ff80
      }

      .category8:hover {
        background-color: #ffc080
      }

      #aside h2,
      #content h2 {
        background-color: #ffd700;
        margin: 0
      }

      #aside a:hover,
      #footer a:hover {
        background-color: #80ffff
      }

      #aside {
        width: 120px;
        margin: 0 .5em .5em 0;
        background-color: #eee;
        overflow-x: hidden
      }

      #aside svg {
        vertical-align: middle
      }

      #aside p {
        margin: .5em
      }

      #aside a {
        display: block;
        padding: 0;
        font-size: 1em;
        font-weight: 400
      }

      #content a,
      #content h2,
      #content h3,
      #footer a {
        font-weight: 700
      }

      #content {
        margin: 0;
        text-align: justify
      }

      #content h2 {
        font-size: 1.2em
      }

      #content h3 {
        font-size: 1.1em;
        margin: 0;
        background-color: #ff8032
      }

      #content p {
        font-size: 1em;
        margin: .5em 0;
        text-align: justify
      }

      #content img {
        margin: .5em 1em;
        max-width: 100%;
      }

      #content hr {
        height: 1px;
        text-align: left;
        margin-left: 0;
        border: 1px solid silver
      }

      #content small {
        font-size: .9em;
        padding: .5em 0
      }

      #content pre {
        font-family: monospace;
        color: #00f;
        background-color: #ffa;
        margin: 2.5em;
        font-size: .9em;
        white-space: pre-wrap;
        text-overflow: ellipsis;
        overflow-x: scroll
      }

      #content a {
        display: inline
      }

      #content a:link {
        color: #00f
      }

      #content a:visited {
        color: #00008b
      }

      #content a:hover {
        color: #00f;
        text-decoration: underline
      }

      #footer {
        max-width: 1400px;
        margin: .5em 0 0;
        padding: .5em
      }

      #footer ul {
        list-style: none
      }

      #footer li::before {
        content: "¬ª "
      }

      .blogPost {
        padding: .5em
      }

      .commentForm,
      .commentList {
        display: none
      }

      ul {
        padding-left: .5em;
        list-style-position: inside
      }

      amp-iframe,
      iframe {
        max-width: 533px
      }

      @media (max-width:480px) {
        #navigation-aside {
          -webkit-flex-direction: row;
          flex-direction: row
        }
        #navigation {
          width: 50%
        }
        #aside>amp-img,
        #navigation amp-img {
          -webkit-transform-origin: left;
          -webkit-transform: scaleX(2);
          transform-origin: left;
          transform: scaleX(2)
        }
        #aside {
          width: 50%;
          margin: 0 0 .5em .5em
        }
        amp-iframe,
        amp-img,
        iframe,
        img {
          max-width: 100%;
          layout: responsive
        }
      }
    </style>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
  </head>
  <body>
    <header id="header">
      <a href="/"><amp-img src="/static/city.jpg" alt="" width="1400" height="20"></amp-img></a>
      <a href="/"><div id="blog">blog</div><div id="ccasion">occasion</div></a>
      &nbsp;<strong>l'occasion</strong> <em>f</em> - Gelegenheit <em>f</em>, die ~ , der ~; <em>bei Gelegenheit</em> - <strong>&agrave; l'occasion</strong>
    </header>
    <div id="container">
      <div id="navigation-aside">

        <nav id="navigation">
          <h2>Tags</h2>
          <a href="/"><amp-img src="/static/mountains_sunrise.jpg" alt="" width="120" height="23"></amp-img></a>
          
            
            <a href="/blogccasion/tags/Technical/" class="tag">Technical</a>
          
            
            <a href="/blogccasion/tags/France/" class="tag">France</a>
          
            
            <a href="/blogccasion/tags/Private/" class="tag">Private</a>
          
            
            <a href="/blogccasion/tags/Work/" class="tag">Work</a>
          
            
            <a href="/blogccasion/tags/Political/" class="tag">Political</a>
          

          <h2>Pages</h2>
          <a href="/"><amp-img src="/static/mountains_sunrise.jpg" alt="" width="120" height="23"></amp-img></a><a class="nav-item" href="/blogccasion/">Home</a><a class="nav-item" href="/blogccasion/posts/">Archive</a><a class="nav-item" href="/blogccasion/about/">About</a></nav>

        <aside id="aside">
          <h2>Related</h2>
          <amp-img src="/static/palms.jpg" alt="" width="120" height="23"></amp-img>
          <div>
            <p>
              <a href="/blogccasion/feed/feed.xml" rel="me"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="16" height="16" viewBox="0 0 256 256"><rect width="246" height="246" rx="50" ry="50" x="5" y="5" fill="#F49C52"/><rect width="236" height="236" rx="47" ry="47" x="10" y="10" fill="#F49C52"/><circle cx="68" cy="189" r="24" fill="#FFF"/><path d="M160 213h-34a82 82 0 0 0-82-82v-34a116 116 0 0 1 116 116zM184 213A140 140 0 0 0 44 73V38a175 175 0 0 1 175 175z" fill="#FFF"/></svg> Blog Feed</a>
            </p>
            <p>
               <a href="https://twitter.com/tomayac" rel="me"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" height="16" width="16" version="1.1" viewBox="0 0 182.7 150.7"><defs><clipPath clipPathUnits="userSpaceOnUse"><path d="m0 10h1366.9v1110.9h-1366.9z"/></clipPath></defs><g transform="matrix(1.3333 0 0 -1.3333 0 150.67)"><g transform="scale(.1)"><g clip-path="url(#clipPath20)"><path d="m1366.9 989.4c-50.3-22.3-104.3-37.4-161-44.2 57.9 34.7 102.3 89.7 123.3 155.2-54.2-32.1-114.2-55.5-178.1-68-51.1 54.5-124 88.6-204.7 88.6-154.9 0-280.4-125.5-280.4-280.4 0-22 2.5-43.4 7.3-63.9-233.1 11.7-439.7 123.4-578 293-24.1-41.4-38-89.6-38-141 0-97.3 49.5-183.1 124.8-233.4-46 1.4-89.2 14.1-127 35.1 0-1.2 0-2.3 0-3.5 0-135.9 96.7-249.2 225-275-23.5-6.4-48.3-9.8-73.9-9.8-18.1 0-35.6 1.7-52.8 5 35.7-111.4 139.3-192.5 262-194.8-96.1-75.2-217-120-348.4-120-22.6 0-45 1.3-66.9 3.9 124.2-79.6 271.6-126 429.9-126 515.8 0 797.9 427.3 797.9 797.9 0 12.2-0.3 24.2-0.8 36.3 54.8 39.6 102.3 89 139.9 145.2" fill="#55ACEE"/></g></g></g></svg> @tomayac</a>
            </p>
            <p>
               <a href="https://tomayac.com/tweets" rel="me"><svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" height="16" width="16" version="1.1" viewBox="0 0 182.7 150.7"><defs><clipPath clipPathUnits="userSpaceOnUse"><path d="m0 10h1366.9v1110.9h-1366.9z"/></clipPath></defs><g transform="matrix(1.3333 0 0 -1.3333 0 150.67)"><g transform="scale(.1)"><g clip-path="url(#clipPath20)"><path d="m1366.9 989.4c-50.3-22.3-104.3-37.4-161-44.2 57.9 34.7 102.3 89.7 123.3 155.2-54.2-32.1-114.2-55.5-178.1-68-51.1 54.5-124 88.6-204.7 88.6-154.9 0-280.4-125.5-280.4-280.4 0-22 2.5-43.4 7.3-63.9-233.1 11.7-439.7 123.4-578 293-24.1-41.4-38-89.6-38-141 0-97.3 49.5-183.1 124.8-233.4-46 1.4-89.2 14.1-127 35.1 0-1.2 0-2.3 0-3.5 0-135.9 96.7-249.2 225-275-23.5-6.4-48.3-9.8-73.9-9.8-18.1 0-35.6 1.7-52.8 5 35.7-111.4 139.3-192.5 262-194.8-96.1-75.2-217-120-348.4-120-22.6 0-45 1.3-66.9 3.9 124.2-79.6 271.6-126 429.9-126 515.8 0 797.9 427.3 797.9 797.9 0 12.2-0.3 24.2-0.8 36.3 54.8 39.6 102.3 89 139.9 145.2" fill="#55ACEE"/></g></g></g></svg> Tweet Archive</a>
            </p>
            <p>
              <a href="pgp_public_key.asc">üîê PGP Public Key</a>
            </p>
          </div>
        </aside>
      </div>
      <main class="tmpl-post" id="content">
        <h2>A Look Inside the Think Tank...</h2>
        <article class="blogPost">
  <header>
    <a href="/blogccasion/2019/08/15/a-quick-look-at-wechats-mini-programs/"><h3>A Quick Look At WeChat&#39;s Mini Programs</h3></a>
    <div>
      <small>
        Created on <time datetime=""></time>
        and categorized as <a class='' href=''></a>.
      </small>
    </div>
    <div><small>Written by <b>Thomas Steiner</b>.</small></div>
    <hr>
  </header>
  <p>While preparing for my <a href="https://events.google.cn/intl/zh-CN/developerdays2019/agenda/#table-row-1-7">presentation</a> at the <a href="https://events.google.cn/intl/zh-CN/developerdays2019/">Google Developer Days 2019 in Shanghai, China</a> I was reminded again that China is a market where few super apps like <a href="https://www.wechat.com/en">WeChat</a> host a <a href="https://techcrunch.com/2018/11/07/wechat-mini-apps-200-million-users/">gazillion mini apps or mini programs</a> that fulfill everyday needs like booking cabs, reserving tables, etc.</p>
<p>I got curious and <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">downloaded the SDK</a> and after playing a bit with the <a href="https://developers.weixin.qq.com/miniprogram/en/dev/">Your First Mini App tutorial</a>, I realized the whole thing is so close to building for the actual web, it both fascinates, intrigues, and honestly somewhat infuriates me.</p>
<h4 id="app-architecture">App Architecture <a class="direct-link" href="#app-architecture" aria-hidden="true">#</a></h4>
<ul>
<li>You style your apps with <a href="https://developers.weixin.qq.com/miniprogram/en/dev/framework/view/wxss.html">WXSS</a>, which is essentially CSS with some neat additions like <a href="https://developers.weixin.qq.com/miniprogram/en/dev/framework/view/wxss.html">responsive pixels</a>.</li>
</ul>
<pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">page-section-gap</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding</span><span class="token punctuation">:</span> 0 30rpx<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.page-body-button</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<ul>
<li>You write your app logic with JavaScript (or TypeScript), with <code>App</code> as the top level object and <code>wx</code> as the object you get all the cool capabilities from. The <a href="https://developers.weixin.qq.com/miniprogram/en/dev/api/">API</a> is incredibly powerful.</li>
</ul>
<details>
<summary>Here are the keys of the `wx` object</summary>
<pre>
[
  "addCard",
  "addNativeDownloadTask",
  "addPhoneContact",
  "addWeRunData",
  "arrayBufferToBase64",
  "authorize",
  "base64ToArrayBuffer",
  "batchGetContactDirectly",
  "bindPaymentCard",
  "calRqt",
  "canIUse",
  "cancelDownloadAppTask",
  "canvasGetImageData",
  "canvasPutImageData",
  "canvasToTempFilePath",
  "captureScreen",
  "checkIsSoterEnrolledInDevice",
  "checkIsSupportFacialRecognition",
  "checkIsSupportSoterAuthentication",
  "checkSession",
  "chooseAddress",
  "chooseContact",
  "chooseImage",
  "chooseInvoice",
  "chooseInvoiceTitle",
  "chooseLocation",
  "chooseMedia",
  "chooseMessageFile",
  "chooseMultiMedia",
  "chooseShareGroup",
  "chooseVideo",
  "chooseWeChatContact",
  "clearStorage",
  "clearStorageSync",
  "closeBLEConnection",
  "closeBluetoothAdapter",
  "closeSocket",
  "cloud",
  "compressImage",
  "connectSocket",
  "connectWifi",
  "createAnimation",
  "createAudioContext",
  "createBLEConnection",
  "createCameraContext",
  "createCanvasContext",
  "createContext",
  "createInnerAudioContext",
  "createIntersectionObserver",
  "createInterstitialAd",
  "createLivePlayerContext",
  "createLivePusherContext",
  "createMapContext",
  "createOffscreenCanvas",
  "createRewardedVideoAd",
  "createSelectorQuery",
  "createUDPSocket",
  "createVideoContext",
  "createWorker",
  "downloadApp",
  "downloadAppForIOS",
  "downloadFile",
  "downloadSilkVoice",
  "drawCanvas",
  "enterContact",
  "env",
  "error",
  "exitVoIPChat",
  "faceVerifyForPay",
  "getABTestConfig",
  "getAccountInfoSync",
  "getAppInstallState",
  "getAvailableAudioSources",
  "getBLEDeviceCharacteristics",
  "getBLEDeviceServices",
  "getBackgroundAudioManager",
  "getBackgroundAudioPlayerState",
  "getBackgroundFetchData",
  "getBackgroundFetchToken",
  "getBatteryInfo",
  "getBatteryInfoSync",
  "getBeacons",
  "getBluetoothAdapterState",
  "getBluetoothDevices",
  "getClipboardData",
  "getConnectedBluetoothDevices",
  "getConnectedWifi",
  "getCookies",
  "getExtConfig",
  "getExtConfigSync",
  "getFileInfo",
  "getFileSystemManager",
  "getHCEState",
  "getImageInfo",
  "getLabInfo",
  "getLaunchOptionsSync",
  "getLocation",
  "getLogManager",
  "getMenuButtonBoundingClientRect",
  "getNetworkType",
  "getOpenDeviceId",
  "getPublicLibVersion",
  "getRealtimeLogManager",
  "getRecorderManager",
  "getResPath",
  "getSavedFileInfo",
  "getSavedFileList",
  "getScreenBrightness",
  "getSelectedTextRange",
  "getSetting",
  "getShareInfo",
  "getStorage",
  "getStorageInfo",
  "getStorageInfoSync",
  "getStorageSync",
  "getSystemInfo",
  "getSystemInfoSync",
  "getUpdateManager",
  "getUserInfo",
  "getWeRunData",
  "getWifiList",
  "getWxSecData",
  "hideKeyboard",
  "hideLoading",
  "hideNavigationBarLoading",
  "hideShareMenu",
  "hideTabBar",
  "hideTabBarRedDot",
  "hideToast",
  "installDownloadApp",
  "isSDKError",
  "isSystemError",
  "isThirdError",
  "joinVoIPChat",
  "launchApplicationDirectly",
  "launchApplicationForNative",
  "launchMiniProgram",
  "loadFontFace",
  "loadPaySpeechDialectConfig",
  "login",
  "makePhoneCall",
  "makeVoIPCall",
  "navigateBack",
  "navigateBackApplication",
  "navigateBackH5",
  "navigateBackMiniProgram",
  "navigateBackNative",
  "navigateTo",
  "navigateToDevMiniProgram",
  "navigateToMiniProgram",
  "navigateToMiniProgramDirectly",
  "nextTick",
  "notifyBLECharacteristicValueChange",
  "notifyBLECharacteristicValueChanged",
  "offAppHide",
  "offAppShow",
  "offAudioInterruptionBegin",
  "offAudioInterruptionEnd",
  "offError",
  "offLocalServiceDiscoveryStop",
  "offLocalServiceFound",
  "offLocalServiceLost",
  "offLocalServiceResolveFail",
  "offPageNotFound",
  "offWindowResize",
  "onAccelerometerChange",
  "onAppEnterBackground",
  "onAppEnterForeground",
  "onAppHide",
  "onAppRoute",
  "onAppRouteDone",
  "onAppShow",
  "onAppUnhang",
  "onAudioInterruptionBegin",
  "onAudioInterruptionEnd",
  "onBLECharacteristicValueChange",
  "onBLEConnectionStateChange",
  "onBLEConnectionStateChanged",
  "onBackgroundAudioPause",
  "onBackgroundAudioPlay",
  "onBackgroundAudioStop",
  "onBackgroundFetchData",
  "onBeaconServiceChange",
  "onBeaconUpdate",
  "onBluetoothAdapterStateChange",
  "onBluetoothDeviceFound",
  "onCompassChange",
  "onDeviceMotionChange",
  "onDownloadAppStateChange",
  "onError",
  "onEvaluateWifi",
  "onGetWifiList",
  "onGyroscopeChange",
  "onHCEMessage",
  "onKeyboardHeightChange",
  "onLocalServiceDiscoveryStop",
  "onLocalServiceFound",
  "onLocalServiceLost",
  "onLocalServiceResolveFail",
  "onLocationChange",
  "onMemoryWarning",
  "onNativeEvent",
  "onNetworkStatusChange",
  "onPageNotFound",
  "onPageReload",
  "onSocketClose",
  "onSocketError",
  "onSocketMessage",
  "onSocketOpen",
  "onTapNavigationBarRightButton",
  "onUploadEncryptedFileToCDNProgress",
  "onUserCaptureScreen",
  "onVoIPChatInterrupted",
  "onVoIPChatMembersChanged",
  "onVoIPChatSpeakersChanged",
  "onVoicePlayEnd",
  "onWebviewEvent",
  "onWifiConnected",
  "onWindowResize",
  "openBluetoothAdapter",
  "openBusinessView",
  "openCard",
  "openDeliveryList",
  "openDocument",
  "openGoldenRedPacketDetail",
  "openLocation",
  "openMiniProgramHistoryList",
  "openMiniProgramProfile",
  "openMiniProgramSearch",
  "openMiniProgramStarList",
  "openOfficialAccountProfile",
  "openOfflinePayView",
  "openQRCode",
  "openSetting",
  "openUrl",
  "openUserProfile",
  "openWCPayCardList",
  "operateWXData",
  "pageScrollTo",
  "pauseBackgroundAudio",
  "pauseDownloadAppTask",
  "pauseVoice",
  "playBackgroundAudio",
  "playVoice",
  "presetWifiList",
  "preventApplePayUI",
  "previewImage",
  "queryDownloadAppTask",
  "reLaunch",
  "readBLECharacteristicValue",
  "redirectTo",
  "removeSavedFile",
  "removeStorage",
  "removeStorageSync",
  "removeTabBarBadge",
  "removeUserCloudStorage",
  "reportAction",
  "reportAnalytics",
  "reportIDKey",
  "reportKeyValue",
  "reportMonitor",
  "request",
  "requestMallPayment",
  "requestPayment",
  "requestPaymentToBank",
  "requestVirtualPayment",
  "resumeDownloadAppTask",
  "saveFile",
  "saveImageToPhotosAlbum",
  "saveVideoToPhotosAlbum",
  "scanCode",
  "secureTunnel",
  "seekBackgroundAudio",
  "sendBizRedPacket",
  "sendGoldenRedPacket",
  "sendHCEMessage",
  "sendSocketMessage",
  "setBackgroundColor",
  "setBackgroundFetchToken",
  "setBackgroundTextStyle",
  "setClipboardData",
  "setCookies",
  "setCurrentPaySpeech",
  "setEnableDebug",
  "setInnerAudioOption",
  "setKeepScreenOn",
  "setLabInfo",
  "setNavigationBarAlpha",
  "setNavigationBarColor",
  "setNavigationBarRightButton",
  "setNavigationBarTitle",
  "setPageStyle",
  "setResPath",
  "setScreenBrightness",
  "setStorage",
  "setStorageSync",
  "setTabBarBadge",
  "setTabBarItem",
  "setTabBarStyle",
  "setTopBarText",
  "setUserCloudStorage",
  "setWifiList",
  "shareAppMessageForFakeNative",
  "showActionSheet",
  "showLoading",
  "showModal",
  "showNavigationBarLoading",
  "showShareActionSheet",
  "showShareMenu",
  "showTabBar",
  "showTabBarRedDot",
  "showToast",
  "startAccelerometer",
  "startBeaconDiscovery",
  "startBluetoothDevicesDiscovery",
  "startCompass",
  "startCustomFacialRecognitionVerify",
  "startCustomFacialRecognitionVerifyAndUploadVideo",
  "startDeviceMotionListening",
  "startFacialRecognitionVerify",
  "startFacialRecognitionVerifyAndUploadVideo",
  "startGyroscope",
  "startHCE",
  "startLocalServiceDiscovery",
  "startLocationUpdate",
  "startLocationUpdateBackground",
  "startPullDownRefresh",
  "startRecord",
  "startSoterAuthentication",
  "startWifi",
  "stopAccelerometer",
  "stopBackgroundAudio",
  "stopBeaconDiscovery",
  "stopBluetoothDevicesDiscovery",
  "stopCompass",
  "stopDeviceMotionListening",
  "stopGyroscope",
  "stopHCE",
  "stopLocalServiceDiscovery",
  "stopLocationUpdate",
  "stopPullDownRefresh",
  "stopRecord",
  "stopVoice",
  "stopWifi",
  "switchTab",
  "traceEvent",
  "triggerGettingWidgetData",
  "updatePerfData",
  "updateShareMenu",
  "updateVoIPChatMuteConfig",
  "uploadEncryptedFileToCDN",
  "uploadFile",
  "uploadSilkVoice",
  "uploadWeRunData",
  "verifyPaymentPassword",
  "version",
  "vibrateLong",
  "vibrateShort",
  "voiceSplitJoint",
  "writeBLECharacteristicValue"
]</pre>
</details>
<ul>
<li>You describe your interface with <a href="https://developers.weixin.qq.com/miniprogram/en/dev/framework/view/wxml/">WXML</a>, which is something between <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a>, <a href="https://vuejs.org/v2/guide/#Declarative-Rendering">Vue's declarative rendering</a>; it also reminds me of old concepts like XSLT's <a href="https://www.w3.org/TR/xslt-30/#xsl-if"><code>&lt;xsl:if&gt;</code></a>:</li>
</ul>
<pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> WEBVIEW <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> APP <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span> MINA <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></span></code></pre>
<p>Overall a really nice separation of concerns. I could very well imagine being productive with this in no time. The onboarding experience of the documentation is pretty neat. The SDK is well made with (essentially an adapted) <a href="https://developers.weixin.qq.com/miniprogram/en/dev/devtools/devtools.html">Chrome DevTools integrated</a> and some VS Code like features like code completion.</p>
<h4 id="programming-concept">Programming Concept <a class="direct-link" href="#programming-concept" aria-hidden="true">#</a></h4>
<p>The overall programming concept <a href="http://opensocial.github.io/spec/2.5.1/Social-Gadget.xml#rfc.section.3.1.2">reminds of OpenSocial</a> (if anyone remembers that) where there is a baseline assumption of a logged in user whose social graph can be explored:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// OpenSocial</span></span><br><span class="highlight-line">osapi<span class="token punctuation">.</span>people<span class="token punctuation">.</span><span class="token function">getViewer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Your name is '</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>displayName <span class="token operator">+</span> <span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// WeChat</span></span><br><span class="highlight-line">wx<span class="token punctuation">.</span><span class="token function">getSetting</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>authSetting<span class="token punctuation">[</span><span class="token string">'scope.userInfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      wx<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token parameter">res</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p><img src="https://user-images.githubusercontent.com/145676/63084473-8cf79900-bf4b-11e9-8838-447688caf661.png" alt="The &quot;My First Mini Program&quot; app running in the WeChat DevTools"></p>
<h4 id="component-library">Component Library <a class="direct-link" href="#component-library" aria-hidden="true">#</a></h4>
<p>They also have nice <a href="https://developers.weixin.qq.com/miniprogram/en/dev/component/">set of declarative components</a>, think web components essentially, that you can create with WXML and interact with from JavaScript:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><br>  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myMap<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"><br>  <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><br><span class="highlight-line">  <span class="token attr-name">latitude</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">  <span class="token attr-name">longitude</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">  <span class="token attr-name">markers</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">  <span class="token attr-name">covers</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span></span><br><span class="highlight-line">  <span class="token attr-name">show-location</span></span><br><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">></span></span></code></pre>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  data<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    latitude<span class="token punctuation">:</span> <span class="token number">23.099994</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    longitude<span class="token punctuation">:</span> <span class="token number">113.324520</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    markers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      latitude<span class="token punctuation">:</span> <span class="token number">23.099994</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      longitude<span class="token punctuation">:</span> <span class="token number">113.324520</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      name<span class="token punctuation">:</span> <span class="token string">'T.I.T ÂàõÊÑèÂõ≠'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    covers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      latitude<span class="token punctuation">:</span> <span class="token number">23.099994</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      longitude<span class="token punctuation">:</span> <span class="token number">113.344520</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      iconPath<span class="token punctuation">:</span> <span class="token string">'/image/location.png'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      latitude<span class="token punctuation">:</span> <span class="token number">23.099994</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      longitude<span class="token punctuation">:</span> <span class="token number">113.304520</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      iconPath<span class="token punctuation">:</span> <span class="token string">'/image/location.png'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function-variable function">onReady</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>mapCtx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createMapContext</span><span class="token punctuation">(</span><span class="token string">'myMap'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token function-variable function">getCenterLocation</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>mapCtx<span class="token punctuation">.</span><span class="token function">getCenterLocation</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span></span><br><span class="highlight-line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>latitude<span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre>
<p><img src="https://user-images.githubusercontent.com/145676/63084474-8d902f80-bf4b-11e9-9267-c69f4923e795.png" alt="WeChat  component sample running in WeChat DevTools"></p>
<p>And of course they have a <a href="https://developers.weixin.qq.com/miniprogram/en/dev/component/web-view.html"><code>&lt;web-view&gt;</code></a>.</p>
<p><img src="https://user-images.githubusercontent.com/145676/63084476-8d902f80-bf4b-11e9-9cb5-d3a216a4d4af.png" alt="WeChat  component sample running in WeChat DevTools"></p>
<h4 id="inner-mechanics">Inner Mechanics <a class="direct-link" href="#inner-mechanics" aria-hidden="true">#</a></h4>
<p>From what I understand, it's all running in an iframe, Chrome/WeChat DevTools then hides the container, and all you see is the WXML layer.<br>
When you look at the SDK's package contents, they make no real effort at hiding any of the inner mechanics: it's all HTML (of particular interest: <code>/Applications/wechatwebdevtools.app/Contents/Resources/package.nw/html/standalone.html</code>), CSS (of particular interest: <code>/Applications/wechatwebdevtools.app/Contents/Resources/package.nw/static/app.css</code>), and JavaScript (of particular interest: <code>/Applications/wechatwebdevtools.app/Contents/Resources/package.nw/js/vendor/index.js</code>).</p>
<p><img src="https://user-images.githubusercontent.com/145676/63084475-8d902f80-bf4b-11e9-954a-aff06f9b0e8d.png" alt="Inspecting package contents of the WeChat DevTools"></p>
<p>Finally there is a local web server running that allows them to link from the online docs to local URLs like <a href="http://127.0.0.1:32123/minicode/VBZ3Jim26zYu">127.0.0.1:32123/minicode/VBZ3Jim26zYu</a>, which in turn allows them to open code samples from the docs that are ready to play with a click in WeChat DevTools. The web server <a href="https://medium.com/bugbountywriteup/zoom-zero-day-4-million-webcams-maybe-an-rce-just-get-them-to-visit-your-website-ac75c83f4ef5">luckily</a> only runs  when the WeChat DevTools are open.</p>

</article>


      </main>
    </div>
      <footer id="footer">
        <ul>
          <li>¬© 2005‚Äì2019 <a href="./">Thomas Steiner</a></li>
          <li>Distributed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a></li>
          <li>Contact and required <a href="./2005/10/21/thomas-steiners-contact-data-180510">legal info</a></li>
          <li><small>This website uses Google Analytics</small></li>
        </ul>
        <amp-analytics type="googleanalytics">
          <script type="application/json">
            {
              "vars": {
                "account": "UA-2040927-1"
              },
              "triggers": {
                "defaultPageview": {
                  "on": "visible",
                  "request": "pageview"
                }
              }
            }
          </script>
        </amp-analytics>
      </footer>
  </body>
</html>
