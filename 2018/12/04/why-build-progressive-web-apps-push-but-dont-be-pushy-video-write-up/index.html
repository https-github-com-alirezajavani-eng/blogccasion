<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,viewport-fit=cover"><meta property="twitter:account_id" content="1510101733"><meta name="description" content="(This is the write-up of the second episode of my new YouTube show “Why Build Progressive Web Apps.” If you prefer watching, the video is embedded below.) (Also check out the the write-up of the…"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="monetization" content="$pay.stronghold.co/1a1c51358527bef4dc7bcc3e92b155ec07a"><meta name="theme-color"><link rel="icon" href="/static/icon.png"><link rel="apple-touch-icon" href="/static/icon.png"><link rel="canonical" href="/blogccasion/2018/12/04/why-build-progressive-web-apps-push-but-dont-be-pushy-video-write-up/"><link rel="alternate" href="/blogccasion/feed/feed.xml" type="application/atom+xml" title="Blogccasion"><link rel="author" href="https://tomayac.com/humans.txt" type="text/plain"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet"><script>if (window.matchMedia('(prefers-color-scheme: dark)').media === 'not all') {
        document.documentElement.style.display = 'none';
        document.head.insertAdjacentHTML(
            'beforeend',
            '<link rel="stylesheet" href="/light.css" onload="document.documentElement.style.display = \'\'">'
        );
      }</script><link rel="stylesheet" href="/css/light.css" media="(prefers-color-scheme:light),(prefers-color-scheme:no-preference)"><link rel="stylesheet" href="/css/dark.css" media="(prefers-color-scheme:dark)"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/prism-theme.css"><link rel="webmention" href="https://webmention.io/blog.tomayac.com/webmention"><link rel="pingback" href="https://webmention.io/blog.tomayac.com/xmlrpc"><link rel="manifest" href="/manifest.webmanifest"><title>Why Build Progressive Web Apps: Push, but Don’t be Pushy! — Video Write-Up</title><script type="module" src="/js/script.mjs"></script><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@tomayac"><meta name="twitter:title" content="Why Build Progressive Web Apps: Push, but Don’t be Pushy! — Video Write-Up"><meta name="twitter:description" content="(This is the write-up of the second episode of my new YouTube show “Why Build Progressive Web Apps.” If you prefer watching, the video is embedded below.) (Also check out the the write-up of the…"><meta name="twitter:image" content="https://blog.tomayac.com/blogccasion/2018/12/04/why-build-progressive-web-apps-push-but-dont-be-pushy-video-write-up/screenshot-dark.png"></head><body><div class="container"><header><a href="/"><h1>blogccasion</h1></a><div class="header-footer-text"><span lang="fr"><strong>l'occasion</strong> <em>f</em> — </span><span lang="de">Gelegenheit</span> <em>f</em>, die ~ , der ~; <em>bei Gelegenheit</em> — <span lang="fr"><strong>à l'occasion</strong></span></div></header><main class="tmpl-post"><article><header><a href="/blogccasion/2018/12/04/why-build-progressive-web-apps-push-but-dont-be-pushy-video-write-up/"><h1>Why Build Progressive Web Apps: Push, but Don’t be Pushy! — Video Write-Up</h1></a><div class="metadata post-date"><img class="author" src="/images/thomas_steiner.jpg" alt="Thomas Steiner headshot"><p>By <a href="/about/">Thomas Steiner</a>. Written on <time datetime="2018-12-04T13:20:36.707Z">Tue Dec 04 2018</time>. <a href="/tags/Technical" class="tag-item"><b>Technical</b></a></p></div></header><p><em>(This is the write-up of the second episode of my new YouTube show “Why Build Progressive Web Apps.” If you prefer watching, the</em> <a href="https://www.youtube.com/watch?v=vRsVx8_94UQ"><em>video</em></a> <em>is embedded below.)</em></p><p><em>(Also check out the the</em> <a href="https://medium.com/dev-channel/why-build-progressive-web-apps-never-lose-a-click-out-video-write-up-74cbbc466afd"><em>write-up of the first episode</em></a> <em>and the</em> <a href="https://medium.com/dev-channel/why-build-progressive-web-apps-if-its-just-a-bookmark-it-s-not-a-pwa-video-write-up-7ccca1c58034"><em>write-up of the third episode</em></a><em>, or watch the</em> <a href="https://www.youtube.com/watch?v=4UK_TDTTWnQ"><em>first episode video</em></a> <em>and the</em> <a href="https://youtu.be/kENeCdS3fzU"><em>third episode video</em></a><em>.)</em></p><p>Let’s face it, on the web, push notifications have become a bit of an omnipresent annoyance. The reason for the bad reputation of push notifications—in my opinion—is that we have been, well, a bit too <em>“pushy”</em> in trying to get people to allow them.</p><embed src="https://www.youtube.com/embed/vRsVx8_94UQ?feature=oembed" caption="“Why Build Progressive Web Apps,” episode 2: Push, but Don’t Be Pushy!"><p>The folks over at Mozilla have phrased it like this in a <a href="https://blog.mozilla.org/firefox/no-notifications/">blog post</a>:</p><blockquote><p>“Online, your attention is priceless. That’s why every site in the universe wants permission to send you notifications about new stuff. It can be distracting at best and annoying at worst.”</p></blockquote><p><img src="/images/asset-1_copy.jpeg" alt="Blog post by Mozilla announcing the option to block push notifications globally."></p><p>A particularly <em>bad practice</em> is to pop up the permission dialog on page load, without any context at all. Several high traffic sites have been caught doing this. To subscribe people to push notifications, you use the the <code>[PushManager](https://developer.mozilla.org/en-US/docs/Web/API/PushManager)</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/PushManager">interface</a>. Now to be fair, this does not allow the developer to specify the context or the to-be-expected frequency of notifications. So where does this leave us?</p><pre><code>const options = {
  userVisibleOnly: true,
  applicationServerKey: APPLICATION_SERVER_KEY,
  // No way to specify context or frequency ¯\_(ツ)_/¯
};
const subscription = await reg.pushManager.subscribe(options);
</code></pre><p>First, maybe let’s take one step back and brainstorm why we would want push notifications in the first place. If done right, <strong><em>push notifications are actually pretty great</em></strong>. For example, they can inform you if you have been <em>outbid</em> on an auction site. They can alert you about <em>severe weather conditions</em> in your hometown. On a less serious note, they can notify you when you have a <em>match on a dating site</em>. Or they can let you know if there’s a significant <em>price drop</em> for something you’re interested in. And yes, of course push notifications can also <em>inform you of new content</em> on a news site.</p><p>As I wrote above, there is no way on the API-level to inform users about the context of push notifications. All you can do with the options parameter is set a flag whether the notifications should be <code>userVisibleOnly</code>, and provide the <code>applicationServerKey</code>. In consequence, it’s crucial that we as application developers provide the context for our notifications ourselves.</p><p>Maybe you remember the <a href="https://googlechromelabs.github.io/affilicats/">🐈 AffiliCats</a> sample app from the <a href="https://www.youtube.com/watch?v=4UK_TDTTWnQ">first episode</a> of “Why Build Progressive Web Apps.” It’s a simple app that simulates a comparison site where you can get great offers for cats. What’s new this time is a <strong><em>button for getting price drop</em></strong> alerts.</p><p><img src="/images/asset-2__copy.png" alt="🐈 AffiliCats app with price drop alerts (Source: https://googlechromelabs.github.io/affilicats/)."></p><p>When you press it for the <em>very</em> first time, the notifications permissions prompt pops up, and it’s immediately clear that it’s related to the price drop alerts.</p><p><img src="/images/asset-3_copy.jpeg" alt="Permission prompt after signing up for Price Alerts."></p><p>If you grant permission, the app subscribes you to a push notification endpoint that is configured to send out dummy notifications, and after a couple of seconds after subscribing, you should receive your first notification.</p><p><img src="/images/asset-4_copy_2.png" alt="Push notification announcing that prices for cats are going down."></p><p>So you can see, prices for cats are dropping, you better get one while they last. And there we have it, an actually useful push notification. It was <em>contextual</em>, <em>meaningful</em>, and <em>timely</em>. The <a href="https://googlechromelabs.github.io/affilicats/">🐈 AffiliCats</a> app is open source, go check out the <a href="https://github.com/googlechromelabs/affilicats">source code</a> if you want to see how it’s implemented. Push notifications are a great power, and with great power comes great responsibility. If you remember one thing from this write-up, I hope it’s <strong><em>context matters</em></strong>!</p><p>In the next episode of <em>“Why build Progressive Web Apps,”</em> we look at another PWA super power: <em>Add to Home Screen</em>! Looking forward to reading our seeing you! In order not to miss it, <strong><em>subscribe</em></strong> to our <a href="https://medium.com/dev-channel">Medium Dev Channel</a>, the Chrome Developers <a href="https://www.youtube.com/channel/UCnUYZLuoy1rq1aVMwx4aTzw">YouTube channel</a>, follow <a href="https://twitter.com/ChromiumDev">@ChromiumDev</a> on Twitter — and if you like, I am <a href="https://twitter.com/tomayac">@tomayac</a> almost universally on the World Wide Internet.</p><p>[<span class="edit-on-github">You can <a href="https://github.com/tomayac/blogccasion/tree/master/./posts/2018/2018-12-04_why-build-progressive-web-apps-push-but-dont-be-pushy-video-write-up.md" rel="nofollow">edit this page on GitHub</a>.</span>]</p></article></main><nav><h2>Pages</h2><ul><li><a class="nav-item" href="/blogccasion/">Home</a></li><li><a class="nav-item" href="/blogccasion/posts/">Archive</a></li><li><a class="nav-item" href="/blogccasion/about/">About</a></li></ul><h2>Tags</h2><ul><li><a href="/blogccasion/tags/Work/" class="tag-item">Work</a></li><li><a href="/blogccasion/tags/Private/" class="tag-item">Private</a></li><li><a href="/blogccasion/tags/Technical/" class="tag-item">Technical</a></li><li><a href="/blogccasion/tags/Political/" class="tag-item">Political</a></li><li><a href="/blogccasion/tags/France/" class="tag-item">France</a></li></ul></nav><svg xmlns="http://www.w3.org/2000/svg"><symbol id="icon-rss" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></symbol><symbol id="icon-twitter" aria-label="Twitter" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1da1f3"/><path fill="#fff" d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></symbol><symbol id="icon-mastodon" aria-label="Mastodon" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%"/><path d="M409 290c-5 24-43 50-85 56-86 11-137-6-137-6 3 13-4 54 70 52 31 0 58-7 58-7l2 27c-51 24-107 15-140 6-67-17-79-90-81-162v-59c0-74 49-96 49-96 50-24 180-22 222 0 0 0 49 22 49 96 0 0 1 55-7 93" fill="#3088d4"/><path d="M358 202v91h-35v-88c0-18-8-27-23-27-18 0-27 11-27 33v47h-34v-47c0-22-9-33-27-33-15 0-23 9-23 27v88h-35v-91c0-18 5-60 52-60 39 0 50 37 50 37s10-37 50-37c45 0 52 42 52 60"/></symbol><symbol id="icon-pgp" aria-label="PGP Public Key" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#29303d"/><g fill="#29303d"><path stroke="#e0e4eb" stroke-width="32" d="M346 214v-37c0-123-180-123-180 0v37"/><rect fill="#ff0" height="210" rx="5%" width="280" x="115" y="210"/><circle cx="256" cy="296" r="28"/><path d="M262 296h-12l-16 69h44"/></g></symbol><symbol id="icon-github" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></symbol></svg><aside><h2>Related</h2><ul><li><a class="aside-item" href="/blogccasion/feed/feed.xml" rel="me"><svg class="icon"><use xlink:href="#icon-rss"></use></svg> Blog Feed</a></li><li><a class="aside-item" href="https://twitter.com/tomayac" rel="me"><svg class="icon"><use xlink:href="#icon-twitter"></use></svg> Twitter</a></li><li><a class="aside-item" href="https://tomayac.com/tweets" rel="me"><svg class="icon"><use xlink:href="#icon-twitter"></use></svg> Tweet Archive</a></li><li><a class="aside-item" href="https://toot.cafe/@tomayac" rel="me"><svg class="icon"><use xlink:href="#icon-mastodon"></use></svg> Mastodon</a></li><li><a class="aside-item" href="https://github.com/tomayac" rel="me"><svg class="icon"><use xlink:href="#icon-github"></use></svg> GitHub</a></li><li><a class="aside-item" href="/pgp_public_key.asc"><svg class="icon"><use xlink:href="#icon-pgp"></use></svg> Public Key</a></li></ul></aside><footer id="footer"><ul class="header-footer-text"><li>© 2005–2019 <a class="footer-link" href="/about">Thomas Steiner</a>.</li><li>Distributed under <a class="footer-link" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.</li><li>Contact and required <a class="footer-link" href="/about/">legal info</a>.</li></ul><dark-mode-toggle permanent dark="Light Theme" light="Dark Theme"></dark-mode-toggle><a class="validator" href="https://validator.w3.org/nu/?doc=https://blog.tomayac.com/blogccasion/2018/12/04/why-build-progressive-web-apps-push-but-dont-be-pushy-video-write-up/"><img src="/static/validhtml5.svg" width="88" height="31" alt="Valid HTML5 badge"></a></footer></div></body></html>